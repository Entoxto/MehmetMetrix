# Инструкция по работе с данными

## Структура данных

- `products.json` — каталог изделий (метаданные, фото, материалы)
- `shipments.json` — партии с историческими ценами
- `money.json` — депозиты и предоплаты

## Архитектура цен

**Цены хранятся в партиях**, а не в каталоге. Это позволяет:
- Сохранять историческую правду (партия 1 = $100, партия 2 = $110)
- Автоматически обновлять каталог — берётся цена из последней партии

## Как добавить новый товар в каталог

1. Откройте файл `data/products.json`
2. Добавьте новый объект в массив `products`:

```json
{
  "id": "python-010",
  "name": "Жакет приталенный из кожи питона — красный глянцевый",
  "category": "Экзотика",
  "photo": "/images/products/Жакет приталенный из кожи питона — красный глянцевый.jpg",
  "sizes": ["xs", "s"],
  "materials": {
    "outer": "Натуральная кожа питона",
    "lining": "70% Acetate 30% Polyester",
    "comments": "Эксклюзивный материал"
  },
  "inStock": true,
  "tags": ["эксклюзив", "премиум"]
}
```

> **Примечание:** Поле `price` НЕ указывается — цена берётся из партий автоматически.

## Формат наименований

Все названия следуют формату: **`Изделие из материала — вариант`**

Примеры:
- `Жакет приталенный из кожи питона — чёрный глянцевый`
- `Брюки из замши — коричневый`
- `Дублёнка из мериноса — бежевый`

## Как добавить позицию в партию

1. Откройте файл `data/shipments.json`
2. Найдите нужную партию и добавьте объект в `rawItems`:

```json
{
  "productId": "python-010",
  "overrideName": "Жакет приталенный из кожи питона — красный глянцевый",
  "price": 550,
  "sizes": { "xs": 3, "s": 2 },
  "status": "in_progress"
}
```

**Обязательные поля:**
- `productId` — ссылка на товар в каталоге
- `price` — цена на момент партии (историческая)

**Опциональные поля:**
- `overrideName` — название для отображения (если отличается от каталога)
- `sample: true` — пометить как образец
- `quantityOverride: 1` — переопределить количество
- `note: "текст"` — примечание
- `paidPreviously: true` — оплачено ранее (не входит в сумму)
- `noPayment: true` — без оплаты (например, вернулось с ремонта)

## Как добавить фото

1. Поместите фото в папку `public/images/products/`
2. Назовите файл ТОЧНО как название товара с вариантом:
   - Пример: `Жакет приталенный из кожи питона — чёрный глянцевый.jpg`
3. Рекомендуемый формат: JPG
4. Рекомендуемый размер: 1200x1600px или больше

## Категории

Доступные категории:
- `Мех` — меринос, пони, кёрли, таскана
- `Замша` — замшевые изделия
- `Кожа` — кожа Hermes и др.
- `Экзотика` — питон и др. экзотические материалы
